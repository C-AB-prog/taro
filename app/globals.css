/* ===== Light + Gold theme (Premium) ===== */

:root{
  --bg0:#fbf7ef;
  --bg1:#f4eee3;

  --card:#ffffff;
  --card2:#fffdf8;
  --stroke: rgba(20,16,10,.10);

  --text:#1c1710;
  --muted:#6f675c;

  --gold:#c9a24a;     /* шампань-золото */
  --gold2:#a77a1c;    /* более тёмное золото */

  --shadow: 0 18px 60px rgba(20,16,10,.10);
  --r16:16px;
  --r20:20px;
}

/* убрать синюю подсветку при тапе (iOS/Android) */
*{
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
a, button{
  -webkit-tap-highlight-color: transparent;
}

/* фокус: золотой, не синий */
:focus{ outline: none; }
:focus-visible{
  box-shadow: 0 0 0 3px rgba(201,162,74,.25);
  border-color: rgba(201,162,74,.45);
}

html,body{
  padding:0;margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color: var(--text);
  background:
    radial-gradient(900px 700px at 12% 8%, rgba(201,162,74,.18) 0%, transparent 60%),
    radial-gradient(700px 520px at 88% 22%, rgba(201,162,74,.12) 0%, transparent 55%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
}

body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:.07;
  background:
    radial-gradient(circle at 10% 20%, #000 0 1px, transparent 1px 110px),
    radial-gradient(circle at 60% 30%, #000 0 1px, transparent 1px 140px),
    radial-gradient(circle at 30% 80%, #000 0 1px, transparent 1px 160px);
  mix-blend-mode: multiply;
}

/* на слабых мобилках шум может мешать быстрой прокрутке */
@media (max-width: 520px){
  body::before{ display:none; }
}

a{ color:inherit; text-decoration:none; }

.container{
  max-width:520px;
  margin:0 auto;
  padding:16px;
  padding-bottom: calc(118px + env(safe-area-inset-bottom));
}

.h1{
  font-size:22px;
  font-weight:950;
  margin:10px 0 14px;
  letter-spacing:.2px;
}

.small{ font-size:12px; color: var(--muted); }
.title{ font-weight:950; letter-spacing:.2px; }
.text{ margin:0; line-height:1.45; color: var(--text); }

.card{
  position: relative;
  background: linear-gradient(180deg, var(--card2), var(--card));
  border: 1px solid var(--stroke);
  border-radius: var(--r20);
  box-shadow: var(--shadow);
  padding: 14px;
  overflow:hidden;
}

/* мягкое золото — ФОН, не “фильтр” поверх картинок */
.card::before{
  content:"";
  position:absolute;
  inset:-2px;
  pointer-events:none;
  opacity:.10;
  background:
    radial-gradient(circle at 20% 0%, rgba(201,162,74,.18), transparent 55%),
    radial-gradient(circle at 80% 10%, rgba(201,162,74,.10), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.03), transparent 40%);
}
.card::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius: inherit;
  pointer-events:none;
  background: radial-gradient(700px 160px at 30% -10%, rgba(201,162,74,.14), transparent 60%);
  opacity: .22;
}

/* ВАЖНО: свечение за контентом */
.card::before,
.card::after{ z-index: 0; }
.card > *{ position: relative; z-index: 1; }

.row{ display:flex; gap:12px; align-items:flex-start; }
.col{ display:flex; flex-direction:column; gap:10px; flex:1; }

.btn{
  border: 1px solid rgba(20,16,10,.12);
  border-radius: 14px;
  padding: 12px 14px;
  font-weight: 950;
  cursor:pointer;
  color: var(--text);
  background: rgba(255,255,255,.75);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.btn:active{ transform: scale(.98); }

.btnPrimary{
  background: linear-gradient(135deg, rgba(201,162,74,.95), rgba(167,122,28,.95));
  border: 0;
  color: #1a140b;
  box-shadow:
    0 14px 40px rgba(201,162,74,.18),
    inset 0 1px 0 rgba(255,255,255,.35);
}
.btnPrimary:active{ filter: brightness(.98); }

.btnGhost{
  background: rgba(255,255,255,.60);
  border-color: rgba(20,16,10,.10);
}

.badge{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  border:1px solid rgba(201,162,74,.25);
  background: rgba(255,255,255,.65);
  border-radius: 999px;
  padding: 8px 10px;
  font-weight: 950;
}

.img{
  width: 96px;
  height: 156px;
  object-fit: cover;
  border-radius: 14px;
  border: 1px solid rgba(20,16,10,.10);
  background: rgba(255,255,255,.8);
}

.grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.hr{
  height:1px;
  background: rgba(20,16,10,.10);
  border:0;
  margin: 12px 0;
}

/* TopBar */
.topbar{
  position: sticky;
  top: 0;
  z-index: 5;
  padding: 12px 0 10px;
  backdrop-filter: blur(14px);
  background: linear-gradient(180deg, rgba(251,247,239,.88), rgba(251,247,239,.50));
  border-bottom: 1px solid rgba(20,16,10,.08);
}
.topbarInner{
  max-width: 520px;
  margin: 0 auto;
  padding: 0 16px;
  display:flex;
  align-items:center;
  justify-content: space-between;
}
.brand{ display:flex; flex-direction:column; line-height:1.1; }
.brandTitle{ font-weight: 950; letter-spacing:.3px; }
.brandSub{ font-size: 12px; color: var(--muted); }

/* ===== Floating Pill Tabbar ===== */
.nav{
  position: fixed;
  left:0; right:0; bottom:0;
  z-index: 40;
}

.navFloat{
  background: transparent;
  border-top: 0;
  padding: 0;
  bottom: calc(10px + env(safe-area-inset-bottom));
}

.navPill{
  max-width: 520px;
  margin: 0 auto;
  background: rgba(255,255,255,.88);
  border: 1px solid rgba(20,16,10,.10);
  border-radius: 22px;
  padding: 10px 10px;
  box-shadow:
    0 18px 45px rgba(20,16,10,.16),
    0 2px 0 rgba(255,255,255,.55) inset;
  backdrop-filter: blur(16px);
  position: relative;
  overflow: hidden;
}
.navPill::before{
  content:"";
  position:absolute;
  inset:-2px;
  pointer-events:none;
  background: radial-gradient(520px 120px at 50% -10%, rgba(201,162,74,.20), transparent 60%);
  opacity: .95;
}

.navInner{
  max-width:520px;
  margin:0 auto;
}

.navInnerPremium{
  display:flex;
  gap: 2px;
  position: relative;
  z-index: 1;
}

.navItem{
  flex:1;
  text-align:center;
  padding: 10px 6px;
  border-radius: 16px;
  background: transparent;
  border: 1px solid transparent;
  display:flex;
  flex-direction:column;
  gap:6px;
  align-items:center;
  justify-content:center;
}

.navItemActive{
  background: rgba(201,162,74,.12);
  border-color: rgba(201,162,74,.28);
}

.icon{
  width: 18px;
  height: 18px;
  color: rgba(167,122,28,.95);
}

.navLabel{
  font-size: 11px;
  font-weight: 900;
  color: rgba(111,103,92,.95);
  line-height: 1;
}
.navLabelActive{
  color: rgba(167,122,28,.98);
}
.navDot{
  width: 4px;
  height: 4px;
  border-radius: 999px;
  background: rgba(167,122,28,.98);
  opacity: 0;
}
.navItemActive .navDot{ opacity: 1; }

/* ===== Modal ===== */
.modalOverlay{
  position: fixed;
  inset:0;
  background: rgba(20,16,10,.35);
  display:flex;
  align-items:flex-end;
  justify-content:center;
  padding: 14px;
  z-index: 50;
  overscroll-behavior: none;
}

/* блокируем скролл фона когда модалка открыта (класс добавляет Modal.tsx) */
html.modalOpen, body.modalOpen{ overflow: hidden; }

.modal{
  width:100%;
  max-width:520px;
  background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(251,247,239,.98));
  border: 1px solid rgba(201,162,74,.26);
  border-radius: 22px;
  padding: 14px;
  box-shadow: var(--shadow);
  position: relative;
  overflow:auto;
  max-height: calc(84vh - env(safe-area-inset-bottom));
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  color: var(--text);
}
.modal::before{
  content:"";
  position:absolute;
  inset:-2px;
  pointer-events:none;
  background: radial-gradient(520px 120px at 30% -10%, rgba(201,162,74,.18), transparent 60%);
  opacity:.8;
  z-index: 0;
}
.modal > *{ position: relative; z-index: 1; }

/* ✅ ФИКС: если где-то в раскладах текст задан белым — принудительно делаем читабельным */
.modal p,
.modal .text,
.modal [data-interpretation],
.modal .interpretation,
.modal .spreadInterpretation,
.modal .spreadText{
  color: var(--text) !important;
}
.modal .small{
  color: var(--muted) !important;
}

/* ===== Shimmer loading ===== */
.shimmer{
  position: relative;
  overflow:hidden;
  border-radius: 14px;
  background: rgba(255,255,255,.72);
  border: 1px solid rgba(20,16,10,.08);
}
.shimmer::after{
  content:"";
  position:absolute;
  inset:-40px;
  transform: translateX(-40%);
  background: linear-gradient(90deg, transparent, rgba(201,162,74,.22), transparent);
  animation: shimmer 1.1s infinite;
}
@keyframes shimmer{
  0%{ transform: translateX(-60%); }
  100%{ transform: translateX(60%); }
}

/* ===== Segmented filters ===== */
.segRow { display:flex; gap: 8px; flex-wrap: wrap; }
.segBtn {
  padding: 10px 12px;
  border-radius: 999px;
  font-weight: 950;
  font-size: 12px;
  background: rgba(255,255,255,.65);
  border: 1px solid rgba(20,16,10,.10);
  color: rgba(28,23,16,.95);
}
.segBtnActive{
  border-color: rgba(201,162,74,.34);
  background: radial-gradient(240px 120px at 50% 0%, rgba(201,162,74,.16), rgba(255,255,255,.65));
}

/* ===== Micro press ===== */
.pressable{
  transition: transform .12s ease, border-color .12s ease;
}
.pressable:active{
  transform: scale(.99);
  border-color: rgba(201,162,74,.28);
}

/* ===== Ritual header ===== */
.ritualLine{
  display:flex;
  align-items:center;
  gap:10px;
  margin: 10px 0 14px;
  color: rgba(111,103,92,.95);
}
.ritualLine::before,
.ritualLine::after{
  content:"";
  flex:1;
  height:1px;
  background: linear-gradient(90deg, transparent, rgba(201,162,74,.34), transparent);
}
.ritualDot{
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(201,162,74,.95);
  box-shadow: 0 0 0 4px rgba(201,162,74,.12);
}

/* ===== Wheel ===== */
.wheelWrap{ display:flex; align-items:center; justify-content:center; padding: 8px 0 2px; }
.wheel{
  width: 220px;
  height: 220px;
  border-radius: 999px;
  border: 1px solid rgba(201,162,74,.32);
  background:
    conic-gradient(from 0deg,
      rgba(201,162,74,.95),
      rgba(167,122,28,.95),
      rgba(201,162,74,.95),
      rgba(167,122,28,.95),
      rgba(201,162,74,.95));
  box-shadow: 0 24px 90px rgba(20,16,10,.18);
  position: relative;
  overflow:hidden;
}
.wheel:before{
  content:"";
  position:absolute;
  inset: 16px;
  border-radius: 999px;
  background: radial-gradient(circle at 35% 35%, rgba(255,255,255,.65), rgba(20,16,10,.12));
  border: 1px solid rgba(20,16,10,.08);
}
.pointer{
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 18px solid rgba(167,122,28,.98);
  filter: drop-shadow(0 10px 18px rgba(20,16,10,.18));
  margin: 0 auto;
}

/* Sparkles */
.sparkStage { position: relative; width: 220px; height: 220px; }
.sparkLayer { position:absolute; inset:0; pointer-events:none; }
.sparkDot {
  position:absolute;
  width: 6px; height: 6px;
  border-radius: 999px;
  background: rgba(201,162,74,.98);
  filter: drop-shadow(0 12px 22px rgba(20,16,10,.18));
}

/* ===== Flip card ===== */
.flipWrap{ width: 96px; height: 156px; perspective: 900px; position: relative; }
.flipInner{ width:100%; height:100%; border-radius:14px; position:relative; transform-style: preserve-3d; }
.flipFace{
  position:absolute; inset:0;
  border-radius:14px;
  backface-visibility:hidden;
  overflow:hidden;
  border: 1px solid rgba(20,16,10,.10);
  background: rgba(255,255,255,.72);
}
.flipFace img{ width:100%; height:100%; object-fit:cover; display:block; }
.flipBack{ transform: rotateY(180deg); }
.flipShine{
  position:absolute;
  inset:-40%;
  background:
    radial-gradient(circle at 20% 20%, rgba(201,162,74,.26), transparent 60%),
    linear-gradient(120deg, transparent, rgba(201,162,74,.18), transparent);
  mix-blend-mode: multiply;
  pointer-events:none;
  transform: translateX(-30%);
  opacity: .28;
}
.flipHint{ margin-top:8px; font-size:12px; color: rgba(111,103,92,.95); }

/* ===== Archive list helpers ===== */
.archiveList{ display:flex; flex-direction:column; gap: 10px; }
.archiveItem{ padding: 12px; }
.archiveRow{ display:flex; align-items:center; gap: 12px; }
.archiveMain{ flex:1; display:flex; flex-direction:column; gap: 3px; min-width: 0; }
.archiveTitle{
  font-weight: 950;
  letter-spacing:.2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.archiveMeta{ font-size: 12px; color: rgba(111,103,92,.95); }
.thumb{
  width: 44px;
  height: 72px;
  border-radius: 12px;
  border: 1px solid rgba(20,16,10,.10);
  object-fit: cover;
  background: rgba(255,255,255,.8);
}
.thumbStack{ position: relative; width: 54px; height: 74px; }
.thumbStack .t1{ position:absolute; left: 0; top: 8px; transform: rotate(-6deg); opacity:.75; }
.thumbStack .t2{ position:absolute; left: 6px; top: 4px; transform: rotate(-2deg); opacity:.9; }
.thumbStack .t3{ position:absolute; left: 12px; top: 0; transform: rotate(2deg); }

/* ===== Performance: deck fast scroll ===== */
.deckCard{
  box-shadow: 0 10px 24px rgba(20,16,10,.10);
}
.deckCard::before,
.deckCard::after{
  display:none !important;
}
@supports (content-visibility: auto){
  .deckCard{
    content-visibility: auto;
    contain-intrinsic-size: 220px 260px;
  }
}
